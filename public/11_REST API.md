APIとはソフトウェアの機能を共有することです。

実際にAPIを使用する流れを見てみましょう。
あるサービスがユーザー情報を提供するAPIを公開していたとします。

### 1. リクエストを送信

APIに対してGETメソッドを使ってリクエストを送信します。

```cmd
GET /api/get-users/99
```

### 2. APIがプログラムを実行

APIが受け取ったリクエストに基づいid = 99のユーザー情報をデータベースから取得しjsonデータに変換します。

### 3. レスポンスデータを送信

```json
{
"id": "99",
"name": "山田太郎",
"email": "taro.yamada@example.com",
"profile_image": "https://example.com/images/taro.jpg"
}
```

APIが実行したプログラムからこのようなjsonデータが返されます。

このように１～３の

- データの送信方法
- 処理するプログラム
- レスポンスデータ

これらをまとめてAPIといいます！


# REST APIとは？？

REST APIとはAPIを設計するアーキテクチャの１つです。
特徴である２つの考え方をご紹介します。

## リソース指向

REST API はリソース（データや機能）を基に設計します。
そしてリソースごとにURLを割り当てて設計していきます。

### リソースの例

| リソース | 説明         | エンドポイント |
|----------|--------------|----------------|
| ユーザー | ユーザー情報 | /user          |
| 記事     | 投稿される記事 | /article       |



# URI、URL、エンドポイントってなんや？？

| **用語**       | **定義**                                                                                     | **例**                                 |
|----------------|---------------------------------------------------------------------------------------------|---------------------------------------|
| **URI**       | リソースを一意に識別するための文字列全般（URLやURNを含む広い概念）。                              | `https://api.example.com/users/123`   |
| **URL**       | URIの一部で、「リソースの場所」を示すもの。スキーム（プロトコル）、ドメイン、パス、クエリなどを含む具体的なアドレス。 | `https://api.example.com/users/123`   |
| **エンドポイント** | API設計において、リソースや機能にアクセスするための接続点。通常はURLのパス部分を指す。                | `/users/{id}`                         |


## HTTPメソッド使い分け


REST APIは、URLに対して、HTTPメソッドを使い分けてデータを操作するものです。

例えば、RESTではないAPIの場合は、Userというリソースに対して、
それぞれURLを使い分けて操作します。

- 表示：/user/get/99
- 作成：/user/create/99
- 更新：/user/update99
- 表示：/user/delete/99

一方でRESTであるAPIは4つのHTTPメソッドを使い分けてリソースの操作を行います。

- GET: リソースの取得
- POST: 新しいリソースの作成
- PUT: 既存リソースの更新
- DELETE: リソースの削除

実際に送信するURLは`/user/99`一つですがメソッドを使い分けて操作します。


## ステート（状態）レスである！

## ステートレス・ステートフルとは？

ステートレスとはサーバーにログインユーザーの情報をサーバーに保持していないことをいいます。

逆にステートフルはサーバーにログインユーザーの情報をほじしていることになります。


### ステートレス

サーバーはログインユーザーの情報を持たず、各リクエストにログインユーザー情報を乗せて送信されます。サーバーに状態を保持していないため処理がシンプルとなり高速なレスポンスが期待できます。
またサーバーに依存しない設計になっているためスケーラビリティ（負荷分散）が高いです。

#### デメリット

- クライアント側で状態を管理する必要があるため、実装が複雑になることがある。
- 各リクエストに必要情報を送信する必要があるため冗長性が増す。


### ステートフル

ログインしたユーザーの情報がサーバーに格納されます。
例えばショッピングサイトのカートに入っている商品の情報はサーバーのセッションに保持されます。
ユーザーはセッションが有効な時間内であれば、
カートに商品が入った状態から買い物を続けることが出来ます。

#### デメリット

上記のように連続的なユーザー体験を提供できますが、
サーバーに依存することになり障害がユーザーに影響を与えることがあります。